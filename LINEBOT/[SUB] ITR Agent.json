{
  "name": "[SUB] ITR Agent",
  "nodes": [
    {
      "parameters": {
        "description": "It lets you use crawl and scrape websites in your n8n workflows.\n",
        "workflowId": {
          "__rl": true,
          "value": "fuPMDOgf9FmrW7zB",
          "mode": "list",
          "cachedResultName": "LINE CHATBOT_Crawl_json"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "URL": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('URL', ``, 'string') }}"
          },
          "matchingColumns": [
            "URL"
          ],
          "schema": [
            {
              "id": "URL",
              "displayName": "URL",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "typeVersion": 2.2,
      "position": [
        -48,
        240
      ],
      "id": "66eb81ea-5e3b-4aaf-adc6-fea56e5b2274",
      "name": "Crawl_Json"
    },
    {
      "parameters": {
        "toolDescription": "Call this tool to get a youtube  video summary.\n",
        "url": "http://gemini-api:8000/summarize",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "url",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', ``, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        80,
        240
      ],
      "id": "df4b0419-96c4-4c42-afb6-659e71ba54fa",
      "name": "Gemini_Video_Understand"
    },
    {
      "parameters": {
        "toolDescription": "use firecrawl and scrape websites in your n8n workflows.",
        "method": "POST",
        "url": "http://api:3002/v1/scrape",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "url",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', ``, 'string') }}"
            },
            {
              "name": "formats",
              "value": "={{ [\"markdown\"] }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        208,
        240
      ],
      "id": "3f9f5629-b57f-499a-92ff-71bf1b42f8ae",
      "name": "Firecrawl"
    },
    {
      "parameters": {
        "options": {
          "temperature": 0.4
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -304,
        240
      ],
      "id": "3eab1579-10bf-490f-b5fb-26fd5e8d0a60",
      "name": "gemini-2.5-flash",
      "credentials": {
        "googlePalmApi": {
          "id": "m3rIFo4KWXjpkCMd",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=# ä¸»è¦ä»»å‹™\nåˆ†æç”¨æˆ¶è¼¸å…¥å…§å®¹ï¼šã€Œ{{ $json.userInput }}ã€\nåŒ…å«ç¶²å€ï¼šã€Œ{{ $json.url }}ã€\n## è™•ç†é‚è¼¯\n\n### å…§å®¹è™•ç†\n**è™•ç†æ–¹å¼**ï¼š\n  - å¦‚å…§å®¹åŒ…å«ç¶²å€ï¼Œä¾åºä½¿ç”¨ \"Firecrawl\"ã€\"Crawl_json\"å·¥å…·è®€å–å®Œæ•´å…§å®¹ï¼Œè‹¥æ²’æœ‰æ­£ç¢ºçˆ¬å–å…§å®¹å˜—è©¦ä¸‹ä¸€å€‹å·¥å…·,éƒ½æ²’æœ‰æ­£ç¢ºçˆ¬å–çš„è©±ï¼Œè«‹å›è¦†éŒ¯èª¤è¨Šæ¯ã€‚å…§å®¹ä¾ç…§è¦æ±‚è¼¸å‡ºã€‚\n- å¦‚å…§å®¹åŒ…å«youtubeç¶²å€ï¼Œä½¿ç”¨\"Gemini_video_understand\"å·¥å…·è®€å–å½±ç‰‡ï¼Œå…§å®¹ä¾ç…§è¦æ±‚è¼¸å‡ºã€‚è‹¥æ²’æœ‰æ­£ç¢ºè®€å–å…§å®¹è«‹å›è¦†éŒ¯èª¤è¨Šæ¯ã€‚\n\n### è¼¸å‡ºæ¨£æ¿é¸æ“‡\n- ä¸€èˆ¬æƒ…æ³ä¾ç…§ã€Œæ¨™æº–è¼¸å‡ºæ¨¡æ¿ã€æ ¼å¼åŒ–å›è¦†,\n- è‹¥ä½¿ç”¨è€…è¦æ±‚è©³ç´°å ±å‘Š,å‰‡ä¾ç…§ã€Œè©³ç´°è¼¸å‡ºæ¨¡æ¿ã€è¼¸å‡º\n- å…§å®¹èˆ‡æŠ€è¡“å…§å®¹ä¸ç›¸é—œï¼Œä¾ç…§ã€ŒéæŠ€è¡“å…§å®¹è™•ç†ã€è¼¸å‡º\n\n## æŠ€è¡“å…§å®¹è¼¸å‡ºè¦ç¯„\n\n### åŸºæœ¬è¦æ±‚\n- **èªè¨€**ï¼šç¹é«”ä¸­æ–‡\n- **å¹³å°**ï¼šLINE é€šè¨Šè»Ÿé«”é©é…\n- **å­—æ•¸**ï¼šæ§åˆ¶åœ¨ 500 å­—ä»¥å…§\n- **æ ¼å¼**ï¼šç´”æ–‡å­—ï¼Œé¿å… Markdown å’Œ HTML èªæ³•\n\n### æ¨™æº–è¼¸å‡ºæ¨¡æ¿\n\n#### æ¨™é¡Œå€å¡Š\nğŸ“‹ {æœƒè­°ä¸»é¡Œæˆ–å…§å®¹æ¨™é¡Œ}\n\n#### å…§å®¹çµæ§‹ï¼ˆä¾åºæ’åˆ—ï¼‰\n\n**ğŸ¯ æ ¸å¿ƒè§€é»**\n- æç…‰ä¸»è¦è«–é»å’Œé—œéµè­°é¡Œ\n- çªå‡ºæœ€é‡è¦çš„æ ¸å¿ƒæ¦‚å¿µ\n\n### è©³ç´°è¼¸å‡ºæ¨¡æ¿\n\n#### æ¨™é¡Œå€å¡Š\n```\nğŸ“‹ {æœƒè­°ä¸»é¡Œæˆ–å…§å®¹æ¨™é¡Œ}\n\n```\n#### å…§å®¹çµæ§‹ï¼ˆä¾åºæ’åˆ—ï¼‰\n\n**ğŸ¯ æ ¸å¿ƒè§€é»**\n- æç…‰ä¸»è¦è«–é»å’Œé—œéµè­°é¡Œ\n- çªå‡ºæœ€é‡è¦çš„æ ¸å¿ƒæ¦‚å¿µ\n\n**ğŸ“‹ è©³ç´°å…§å®¹**  \n- æ•´ç†é‡è¦è¨è«–é»å’Œé—œéµè³‡è¨Š\n- ä¿æŒé‚è¼¯é †åºå’Œå®Œæ•´è„ˆçµ¡\n\n**âœ… é‡è¦çµè«–**\n- æ­¸ç´é”æˆçš„å…±è­˜å’Œæ±ºè­°\n- æ˜ç¢ºåˆ—å‡ºå¾ŒçºŒè¡Œå‹•é …ç›®\n\n### æ ¼å¼å„ªåŒ–æŒ‡å¼•\n- ä½¿ç”¨è¡¨æƒ…ç¬¦è™Ÿå¢å¼·è¦–è¦ºæ•ˆæœå’Œå¯è®€æ€§\n- é©ç•¶é‹ç”¨åˆ†éš”ç·šå’Œç©ºè¡Œæå‡çµæ§‹æ¸…æ™°åº¦\n- é‡å°æ‰‹æ©Ÿé–±è®€é«”é©—å„ªåŒ–æ’ç‰ˆ\n- ç¢ºä¿å…§å®¹å®Œæ•´ä¸”é‚è¼¯æ¸…æ¥š\n\n### è¼¸å‡ºé™åˆ¶\nâŒ ç¦æ­¢ä½¿ç”¨ï¼šMarkdown èªæ³•ï¼ˆ#ã€**ã€[]()ç­‰ï¼‰\nâŒ ç¦æ­¢ä½¿ç”¨ï¼šHTML æ¨™ç±¤\nâŒ ç¦æ­¢è¼¸å‡ºï¼šè™•ç†éç¨‹èªªæ˜æˆ–é¡å¤–è¨»è§£\nâœ… åƒ…è¼¸å‡ºï¼šæœ€çµ‚æ•´ç†å®Œæˆçš„å…§å®¹ç¸½çµ\n\n## åŸ·è¡Œæé†’\n- åŸºæ–¼æä¾›çš„åŸå§‹å…§å®¹é€²è¡Œåˆ†æç¸½çµ\n- ç¢ºä¿å›è¦†å…§å®¹æº–ç¢ºä¸”å…·æœ‰å¯¦ç”¨åƒ¹å€¼\n- ä¿æŒå°ˆæ¥­æ€§çš„åŒæ™‚å…¼é¡§æ˜“è®€æ€§",
        "hasOutputParser": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 1.7,
      "position": [
        -128,
        16
      ],
      "id": "d6837506-2204-49eb-ae74-1d9289c2a787",
      "name": "ITR Agent"
    },
    {
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "userInput"
            },
            {
              "name": "url"
            },
            {
              "name": "userId"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        -528,
        16
      ],
      "id": "06e951be-fef3-4280-a394-23a2aceff174",
      "name": "When Executed by Another Workflow"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.userId }}"
      },
      "type": "@n8n/n8n-nodes-langchain.memoryZep",
      "typeVersion": 1.3,
      "position": [
        -176,
        240
      ],
      "id": "9e2b93ff-964d-4216-8204-514f47507327",
      "name": "Zep",
      "credentials": {
        "zepApi": {
          "id": "tR57ak8KfkLp9cPh",
          "name": "Zep Api account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Crawl_Json": {
      "ai_tool": [
        [
          {
            "node": "ITR Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Gemini_Video_Understand": {
      "ai_tool": [
        [
          {
            "node": "ITR Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Firecrawl": {
      "ai_tool": [
        [
          {
            "node": "ITR Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "gemini-2.5-flash": {
      "ai_languageModel": [
        [
          {
            "node": "ITR Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "When Executed by Another Workflow": {
      "main": [
        [
          {
            "node": "ITR Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Zep": {
      "ai_memory": [
        [
          {
            "node": "ITR Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "4fba8906-8004-4f53-8d7a-04d1bb09d705",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "fe071ad636e45e06fef1442bb4b3138ea8056f3019d720e9410a8f0ea42951a8"
  },
  "id": "vnIiG9PUf580bQC7",
  "tags": [
    {
      "createdAt": "2025-08-21T02:49:05.390Z",
      "updatedAt": "2025-08-21T02:49:05.390Z",
      "id": "lygt6UVIOm5CiWbW",
      "name": "linebot"
    }
  ]
}