{
  "name": "[SUB] 1399_rag_agent",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        -64,
        -96
      ],
      "id": "5805fb00-26e9-4db2-a8b0-ed225deee70e",
      "name": "When chat message received",
      "webhookId": "a8294503-8968-4718-9d88-cb28808b3e58",
      "disabled": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.userInput }}",
        "options": {
          "systemMessage": "=ä½ æ˜¯ä¸€å€‹å°ˆæ¥­åŠ©ç†ï¼Œè² è²¬ **è½‰è¿°ä¸¦æ•´ç† MCP å·¥å…· `1399_rag` çš„å›è¦†å…§å®¹**ã€‚\n\n\n---\n\n## ğŸ”§ **å·¥å…·ä½¿ç”¨è¦ç¯„**\n\n**å¿…é ˆä½¿ç”¨ MCP å·¥å…·ï¼š`1399_rag`**\nç”¨ä¾†æª¢ç´¢ä¸¦å›ç­”ä½¿ç”¨è€…å•é¡Œã€‚\n\n---\n\n## ğŸ§¾ **å›è¦†æ ¼å¼è¦æ±‚ï¼ˆé©åˆ LINE è¼¸å‡ºï¼‰**\n\n### âœ” **1. ä¸»è¦å›ç­”å€**\n\n* æ¸…æ¥šã€ç²¾ç°¡åœ°å›ç­”ä½¿ç”¨è€…çš„å•é¡Œã€‚\n* å…§å®¹å¿…é ˆä¾†è‡ª `1399_rag` çš„æª¢ç´¢çµæœã€‚\n* **è‹¥æ²’æœ‰æª¢ç´¢åˆ°å…§å®¹ï¼Œè«‹ç›´æ¥å‘ŠçŸ¥æ‰¾ä¸åˆ°ç›¸é—œè³‡è¨Šï¼Œä¸è¦è‡ªè¡Œç”Ÿæˆç­”æ¡ˆã€‚**\n\n---\n\n### âœ” **2. åƒè€ƒæ–‡ä»¶å€**\n\n* å¦‚æœ `1399_rag` æœ‰å›å‚³ä¾†æºï¼Œçµå°¾è«‹åŠ ä¸Šï¼š\n\n```\nğŸ“„ åƒè€ƒæ–‡ä»¶ï¼š\n- xxxx\n- xxxx\n```\n\n* è‹¥ç„¡ä¾†æºï¼Œä¸éœ€è¦é¡¯ç¤ºæ­¤å€å¡Šã€‚\n\n---\n\n### âœ” **3. è³‡æºæ¶ˆè€—è³‡è¨Š**\n\nå¦‚æœæœ‰æª¢ç´¢çµæœï¼Œè«‹åœ¨å›ç­”æœ€å¾Œè£œä¸Šï¼š\n\n```\nğŸ”¢ Token ä½¿ç”¨ï¼šXX tokens  \nğŸ’° é ä¼°è²»ç”¨ï¼š$0.00XX  \nâ± å›è¦†æ™‚é–“ï¼šXXX ms\n```\n\n---\n\n## ğŸ“Œ **å…¶ä»–æ³¨æ„äº‹é …**\n\n* å…§å®¹æ ¼å¼éœ€ç¬¦åˆ **LINE çš„æ–‡å­—æ’ç‰ˆç¿’æ…£**ï¼ˆæ®µè½æ¸…æ¥šã€é©åº¦ä½¿ç”¨ç¬¦è™Ÿï¼‰ã€‚\n* ä¸è¦åŠ å…¥å¤šé¤˜åˆ†æã€å€‹äººæ„è¦‹æˆ–æ¨æ¸¬ã€‚\n* å›è¦†å‹™å¿…æ¸…æ¥šã€ç°¡æ½”ã€å¥½é–±è®€ã€‚"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        160,
        0
      ],
      "id": "83a1d130-1b8e-48fa-aa9a-dc8b90251414",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        176,
        224
      ],
      "id": "e109e7f9-bb9d-4946-8c16-e43f93c03e6c",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "m3rIFo4KWXjpkCMd",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "userInput"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        -64,
        96
      ],
      "id": "580ff69a-9613-4349-b07e-9945726003c3",
      "name": "When Executed by Another Workflow"
    },
    {
      "parameters": {
        "endpointUrl": "https://agentic-rag-api-jt7pjdeeoa-de.a.run.app/mcp",
        "include": "selected",
        "includeTools": [
          "query_rag"
        ],
        "options": {
          "timeout": 60000
        }
      },
      "type": "@n8n/n8n-nodes-langchain.mcpClientTool",
      "typeVersion": 1.2,
      "position": [
        304,
        224
      ],
      "id": "e047171d-e0bd-487e-a38c-75f94f4ae002",
      "name": "1399_rag"
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "When Executed by Another Workflow": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "1399_rag": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "a811b305-1e55-463d-a082-2967a3b05da6",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "fe071ad636e45e06fef1442bb4b3138ea8056f3019d720e9410a8f0ea42951a8"
  },
  "id": "wI0zwupdhGI69Rfj",
  "tags": [
    {
      "updatedAt": "2025-08-21T02:49:05.390Z",
      "createdAt": "2025-08-21T02:49:05.390Z",
      "id": "lygt6UVIOm5CiWbW",
      "name": "linebot"
    }
  ]
}